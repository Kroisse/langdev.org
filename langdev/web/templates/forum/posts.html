{% extends '/forum/base.html' %}
{% from 'pager.html' import render_pager %}
{% block head %}
  <link rel="alternate"
    href="{{ config.get('FORUM_FEED_HREF', url_for('atom', _external=True)) }}"
    type="{{ config.get('FORUM_FEED_TYPE', 'application/atom+xml') }}" />
{% endblock %}
{% block body %}
  {% if current_user %}
    <a href="{{ url_for('write_form') }}">Write a post</a>
  {% endif %}
  <table>
    <thead>
      <tr>
        <th class="author">Author</th>
        <th class="title">Title</th>
        <th class="created-at">Written Time</th>
      </tr>
    </thead>
    <tbody>
      {% for post in posts %}
        {% if post.sticky %}
          <tr class="sticky">
        {% else %}
          <tr>
        {% endif %}
          <td class="author">
            <a href="{{ url_for('user.profile',
                                user_login=post.author.login) }}">
                {{- post.author -}}
            </a>
          </td>
          <th class="title">
            <a href="{{ url_for('post', post_id=post.id) }}">{{ post }}</a>
          </th>
          <td class="created-at">
            <time datetime="{{ post.created_at.isoformat() }}">
              {{- post.created_at.date() -}}
            </time>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {{ render_pager(pager, limit, 'posts') }}
{% endblock %}
