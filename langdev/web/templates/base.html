{%- macro static_url_for(filename) -%}
  {%- set url = url_for('.static', filename=filename) -%}
  {%- if config['DEBUG'] -%} {{ url.replace('.min.', '.') }}
  {%- else -%} {{ url }} {%- endif -%}
{%- endmacro -%}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>{% block title -%} LangDev {%- endblock %}</title>
    <!--[if lt IE 9]>
    <script src="{{ static_url_for('html5.js') }}"></script>
    <![endif]-->
    <link rel="stylesheet/less" type="text/css"
          href="{{ static_url_for('style.less') }}" />
    <script>
    // <![CDATA[
    WebFontConfig = {
      google: { families: ['Nunito'] }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http')
             + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })();
    // ]]>
    </script>
    <script src="{{ static_url_for('less-1.1.3.min.js') }}"></script>
    <script src="{{ static_url_for('jquery-1.6.1.min.js') }}"></script>
    {% block head %}
    {% endblock %}
  </head>
  <body class="{{ request.endpoint.split('.')|join(' ') }}">
    <header>
      <h1><a href="{{ url_for('home.main') }}">LangDev</a></h1>
      <nav class="user">
        {% if current_user %}
          <a href="{{ url_for('user.profile',
                              user_login=current_user.login) }}">
            {{- current_user -}}
          </a>
          <a href="{{ url_for('user.signout') }}">Sign out</a>
        {% else %}
          <a href="{{ url_for('user.signin_form',
                              return_url=request.url) }}">Sign in</a>
          <a href="{{ url_for('user.signup_form') }}">Sign up</a>
        {% endif %}
      </nav>
    </header>
    <div id="body">
      {% block body %}
      {% endblock %}
    </div>
    {% if config.INTERSITES %}
      <footer>
        <nav id="intersites">
          {% for name, url in config.INTERSITES %}
            <a href="{{ url }}">{{ name }}</a>
          {% endfor %}
        </nav>
      </footer>
    {% endif %}
  </body>
</html>
